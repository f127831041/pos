<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="footer(pagejs)">
    <!-- JavaScript Libraries -->
    <script th:src="@{'/plugins/jquery-3.4.1.min.js'}"></script>
    <script th:src="@{'/plugins/bootstrap.bundle.min.js'}"></script>
    <script th:src="@{'/plugins/chart/chart.min.js'}"></script>
    <script th:src="@{'/plugins/easing/easing.min.js'}"></script>
    <script th:src="@{'/plugins/waypoints/waypoints.min.js'}"></script>\
    <script th:src="@{'/plugins/owlcarousel/owl.carousel.min.js'}"></script>
    <script th:src="@{'/plugins/tempusdominus/js/moment.min.js'}"></script>
    <script th:src="@{'/plugins/tempusdominus/js/moment-timezone.min.js'}"></script>
    <script th:src="@{'/plugins/tempusdominus/js/tempusdominus-bootstrap-4.min.js'}"></script>
    <script th:src="@{'/plugins/main.js'}"></script>
    <script th:src="@{'/plugins/jquery-validate/jquery.validate.min.js'}"></script>
    <script th:src="@{'/plugins/jquery-validate/messages_zh.js'}"></script>
    <script th:src="@{'/plugins/loading/jquery.loading.min.js'}"></script>
    <script th:src="@{'/plugins/loading/jquery.blockUI.js'}"></script>
    <script th:src="@{'/plugins/sweetalert2/sweetalert2.min.js'}"></script>
    <script th:src="@{'/plugins/select2/select2.full.min.js'}"></script>
    <script th:src="@{'/plugins/datatables/datatables.min.js'}"></script>
    <script th:src="@{'/plugins/datatables/dataTables.colReorder.min.js'}"></script>
    <script th:src="@{'/plugins/datatables/dataTables.rowReorder.min.js'}"></script>
    <script th:src="@{'/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js'}"></script>
    <script th:src="@{'/plugins/bootstrap-datepicker/bootstrap-datepicker.zh-TW.min.js'}"></script>
    <script th:src="@{'/plugins/daterangepicker/daterangepicker.js'}"></script>
    <script th:src="@{'/plugins/daterangepicker/moment.min.js'}"></script>
    <script th:src="@{'/js/utils.js'}"></script>
<!--    <script th:if="${pagejs ne null}" th:src="@{'/js/'+${pagejs}}"></script>-->
    <script th:if="${pagejs ne null}" th:src="@{'/js/'+${pagejs}+'?v='+${#dates.createNow().getTime()}}"></script>
    <script>
        /**
         * 登出
         */
        function logOut() {
            $.ajax({
                type: "POST",
                url: utils.getHandlerPath("/doLogOut"),
                cache: false,
                async: false
            }).done(function (response) {
                if (response.code !== 200) {
                    utils.msgAlert(response.msg, "error");
                }
            })
        }

        $(document).keydown(function (event) {
            if (event.keyCode === 13) {
                $(".search").click();
            }
        });

        $('.modal').on('hidden.bs.modal', function () {
            $(this).off("keydown");
            $(document).keydown(function (event) {
                if (event.keyCode === 13) {
                    $(".search").click();
                }
            });
        });

        $('.modal').on('shown.bs.modal', function () {
            $(document).off("keydown");
            $(this).bind("keydown", function(event) {
                if (event.keyCode === 13) {
                    $(this).find(".save").click();
                }
                if (event.keyCode === 27) {
                    $(this).find(".close").click();
                }
            });
        });
    </script>
</th:block>
</html>